<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Reactivity | Introduction to R Shiny</title>
  <meta name="description" content="This is the course mateial for the workshop- Introduction R Shiny offered by Monash Bioinformatics Platform." />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Reactivity | Introduction to R Shiny" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the course mateial for the workshop- Introduction R Shiny offered by Monash Bioinformatics Platform." />
  <meta name="github-repo" content="nkandhari/R-shiny-MBP" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Reactivity | Introduction to R Shiny" />
  
  <meta name="twitter:description" content="This is the course mateial for the workshop- Introduction R Shiny offered by Monash Bioinformatics Platform." />
  

<meta name="author" content="Nitika K., Adele B., Paul F. H." />


<meta name="date" content="2022-06-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="structure.html"/>
<link rel="next" href="tutorial.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Intro to R Shiny</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#download-files"><i class="fa fa-check"></i><b>1.1</b> Download files</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#overview"><i class="fa fa-check"></i><b>1.2</b> Overview</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#source-code"><i class="fa fa-check"></i>Source code</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#authors-and-copyright"><i class="fa fa-check"></i>Authors and copyright</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#what-is-shiny"><i class="fa fa-check"></i><b>2.1</b> What is Shiny</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#another-r-package---whats-so-special-about-shiny"><i class="fa fa-check"></i><b>2.2</b> Another R package - What’s so special about Shiny?</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#example-apps"><i class="fa fa-check"></i><b>2.3</b> Example apps</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#create-your-first-shiny-app"><i class="fa fa-check"></i><b>2.4</b> Create your first Shiny App</a>
<ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#activity-1-creating-a-shinyapp-that-prints-hello-world"><i class="fa fa-check"></i>Activity 1: Creating a ShinyApp that prints “Hello, World!”</a></li>
<li class="chapter" data-level="2.4.1" data-path="intro.html"><a href="intro.html#breakdown-of-the-code"><i class="fa fa-check"></i><b>2.4.1</b> Breakdown of the code</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro.html"><a href="intro.html#running-a-shiny-app"><i class="fa fa-check"></i><b>2.4.2</b> Running a Shiny App</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#challenge-1-now-open-the-app_ui.r-inside-shinyapps-folder-and-examine-what-it-does-breakout."><i class="fa fa-check"></i>Challenge 1: Now, open the <code>app_ui.R</code> inside <code>ShinyApps</code> folder and examine what it does (Breakout).</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i><b>3</b> Structure of a Shiny App</a>
<ul>
<li class="chapter" data-level="3.1" data-path="structure.html"><a href="structure.html#ui"><i class="fa fa-check"></i><b>3.1</b> UI</a></li>
<li class="chapter" data-level="3.2" data-path="structure.html"><a href="structure.html#layout"><i class="fa fa-check"></i><b>3.2</b> Layout</a>
<ul>
<li class="chapter" data-level="" data-path="structure.html"><a href="structure.html#activity-2-ui-layouts"><i class="fa fa-check"></i>Activity 2: UI Layouts</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="structure.html"><a href="structure.html#widgets"><i class="fa fa-check"></i><b>3.3</b> Widgets</a>
<ul>
<li class="chapter" data-level="" data-path="structure.html"><a href="structure.html#activity-3-now-open-the-widgets.r-inside-shinyapps-folder-and-try-running-it."><i class="fa fa-check"></i>Activity 3: Now, open the <code>widgets.R</code> inside <code>ShinyApps</code> folder, and try running it.</a></li>
<li class="chapter" data-level="" data-path="structure.html"><a href="structure.html#challenge-2-rewrite-your-ui-to-create-a-shiny-app-that-contains-following-breakout."><i class="fa fa-check"></i>Challenge 2: Rewrite your <code>ui</code> to create a Shiny app that contains following (Breakout).</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="structure.html"><a href="structure.html#ui-output"><i class="fa fa-check"></i><b>3.4</b> UI Output</a></li>
<li class="chapter" data-level="3.5" data-path="structure.html"><a href="structure.html#server"><i class="fa fa-check"></i><b>3.5</b> Server</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="structure.html"><a href="structure.html#input"><i class="fa fa-check"></i><b>3.5.1</b> Input</a></li>
<li class="chapter" data-level="3.5.2" data-path="structure.html"><a href="structure.html#output"><i class="fa fa-check"></i><b>3.5.2</b> Output</a></li>
<li class="chapter" data-level="" data-path="structure.html"><a href="structure.html#challenge-3-shiny-output-and-server-logic"><i class="fa fa-check"></i>Challenge 3: Shiny Output and Server logic</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="reactivity.html"><a href="reactivity.html"><i class="fa fa-check"></i><b>4</b> Reactivity</a>
<ul>
<li class="chapter" data-level="4.1" data-path="reactivity.html"><a href="reactivity.html#overview-of-reactivity"><i class="fa fa-check"></i><b>4.1</b> Overview of Reactivity</a>
<ul>
<li class="chapter" data-level="" data-path="reactivity.html"><a href="reactivity.html#challenge-4-modify-greeting.r-to-print-the-uppercase-letters-breakout"><i class="fa fa-check"></i>Challenge 4: Modify <code>greeting.R</code> to print the uppercase letters (breakout)</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="reactivity.html"><a href="reactivity.html#r-expressions-vs-reactive-expressions"><i class="fa fa-check"></i><b>4.2</b> R expressions vs Reactive expressions</a>
<ul>
<li class="chapter" data-level="" data-path="reactivity.html"><a href="reactivity.html#advanced-workings-of-reactive-expressions"><i class="fa fa-check"></i>Advanced: Workings of reactive expressions</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="reactivity.html"><a href="reactivity.html#accessing-reactivity"><i class="fa fa-check"></i><b>4.3</b> Accessing Reactivity</a>
<ul>
<li class="chapter" data-level="" data-path="reactivity.html"><a href="reactivity.html#challenge-5-create-a-function-that-uses-pythagoras-theorm-to-calculate-hypotenuse-if-height-and-base-variables-are-given-breakout."><i class="fa fa-check"></i>Challenge 5: Create a function that uses pythagoras theorm to calculate hypotenuse, if height and base variables are given (breakout).</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tutorial.html"><a href="tutorial.html"><i class="fa fa-check"></i><b>5</b> Create Shiny App from scratch</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tutorial.html"><a href="tutorial.html#setting-up-a-shiny-app"><i class="fa fa-check"></i><b>5.1</b> Setting up a shiny app</a></li>
<li class="chapter" data-level="5.2" data-path="tutorial.html"><a href="tutorial.html#using-widgets"><i class="fa fa-check"></i><b>5.2</b> Using widgets</a></li>
<li class="chapter" data-level="5.3" data-path="tutorial.html"><a href="tutorial.html#data-processing-on-the-server-side"><i class="fa fa-check"></i><b>5.3</b> Data processing on the server side</a>
<ul>
<li class="chapter" data-level="" data-path="tutorial.html"><a href="tutorial.html#activity-4-modily-x--and-y-axes-labels"><i class="fa fa-check"></i>Activity 4: Modily x- and y-axes labels</a></li>
<li class="chapter" data-level="" data-path="tutorial.html"><a href="tutorial.html#challenge-5-modify-the-app-to-add-the-following-breakout."><i class="fa fa-check"></i>Challenge 5: Modify the app to add the following (breakout).</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="nextsteps.html"><a href="nextsteps.html"><i class="fa fa-check"></i><b>6</b> Next steps</a>
<ul>
<li class="chapter" data-level="6.1" data-path="nextsteps.html"><a href="nextsteps.html#going-fancy-with-shiny-dashboards"><i class="fa fa-check"></i><b>6.1</b> Going fancy with Shiny Dashboards</a></li>
<li class="chapter" data-level="6.2" data-path="nextsteps.html"><a href="nextsteps.html#interactive-documents"><i class="fa fa-check"></i><b>6.2</b> Interactive Documents</a></li>
<li class="chapter" data-level="6.3" data-path="nextsteps.html"><a href="nextsteps.html#render-ui-elements-from-the-server-side"><i class="fa fa-check"></i><b>6.3</b> Render UI Elements From the Server Side</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>7</b> Further Reading</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R Shiny</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reactivity" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Reactivity<a href="reactivity.html#reactivity" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="overview-of-reactivity" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Overview of Reactivity<a href="reactivity.html#overview-of-reactivity" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In Section <a href="structure.html#structure">3</a>, we mentioned that the Shiny server logic is based on reactive programming. The server takes input from the UI, runs the code chunks defined within, generates output and sends it to the UI. When you change the input, the server re-runs the code chunks and sends the updated output to the UI.</p>
<p>Consider the following example. The UI takes a single text input i.e. name of a person. The server concatenates the input string with “Hello” at the start and, “!” at the end, followed by another string “Have a nice day!”, and returns the concatenated string to the UI and prints as output.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="reactivity.html#cb1-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb1-2"><a href="reactivity.html#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">textInput</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;What&#39;s your name?&quot;</span>),</span>
<span id="cb1-3"><a href="reactivity.html#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">textOutput</span>(<span class="st">&quot;greeting&quot;</span>)</span>
<span id="cb1-4"><a href="reactivity.html#cb1-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-5"><a href="reactivity.html#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="reactivity.html#cb1-6" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb1-7"><a href="reactivity.html#cb1-7" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>greeting <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb1-8"><a href="reactivity.html#cb1-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="st">&quot;Hello &quot;</span>, input<span class="sc">$</span>name, <span class="st">&quot;!&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="st">&quot;Have a nice day!&quot;</span>)</span>
<span id="cb1-9"><a href="reactivity.html#cb1-9" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb1-10"><a href="reactivity.html#cb1-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="figs/Nitika.png" style="width:50.0%" />
<img src="figs/Batman.png" style="width:50.0%" />
<img src="figs/Aladdin.png" style="width:50.0%" /></p>
<div id="challenge-4-modify-greeting.r-to-print-the-uppercase-letters-breakout" class="section level3 unnumbered challenge hasAnchor">
<h3>Challenge 4: Modify <code>greeting.R</code> to print the uppercase letters (breakout)<a href="reactivity.html#challenge-4-modify-greeting.r-to-print-the-uppercase-letters-breakout" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Open <code>ShinyApps/reactive/greeting.R</code> and edit the file to print the input name in uppercase letters. The new app should:</p>
<ul>
<li><p>Ask your name in lowercase letters, example: “batman”.</p></li>
<li><p>And outputs- “Your name in uppercase letters is: BATMAN”.</p></li>
</ul>
<p>Hint: Get help on <code>toupper()</code></p>
</div>
</div>
<div id="r-expressions-vs-reactive-expressions" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> R expressions vs Reactive expressions<a href="reactivity.html#r-expressions-vs-reactive-expressions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Most R code typically deals with static data. What makes Shiny apps magical is the fact that they are interactive which is made possible due to reactivity. There are two important aspects to reactivity:</p>
<ol style="list-style-type: decimal">
<li><p>Reactive expressions produce the latest computation</p></li>
<li><p>Reactive expressions save re-computation.</p></li>
</ol>
<p>Consider the following example. We assign a value of <code>5</code> to the variable <code>a</code>. Using R expressions, we add <code>10</code> to <code>a</code>, which prints the result as <code>15</code>. Then, we update the value of <code>a</code> to <code>10</code>. Even though, the new value of <code>a</code> is now <code>10</code>, nothing happens! This is because, we haven’t called the expression <code>a + 10</code>. In order to see the updated output of our expression, we need to explicitly re-run the expression. This is how the R expressions work.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="reactivity.html#cb2-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb2-2"><a href="reactivity.html#cb2-2" aria-hidden="true" tabindex="-1"></a>(sum <span class="ot">&lt;-</span> a <span class="sc">+</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 15</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="reactivity.html#cb4-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb4-2"><a href="reactivity.html#cb4-2" aria-hidden="true" tabindex="-1"></a>sum</span></code></pre></div>
<pre><code>## [1] 15</code></pre>
<p>However, this problem could be solved by using a function. Here we create a function to add <code>10</code> to a number.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="reactivity.html#cb6-1" aria-hidden="true" tabindex="-1"></a>add10 <span class="ot">&lt;-</span> <span class="cf">function</span>(num){</span>
<span id="cb6-2"><a href="reactivity.html#cb6-2" aria-hidden="true" tabindex="-1"></a>    result <span class="ot">&lt;-</span> num <span class="sc">+</span> <span class="dv">10</span></span>
<span id="cb6-3"><a href="reactivity.html#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(result)</span>
<span id="cb6-4"><a href="reactivity.html#cb6-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-5"><a href="reactivity.html#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">add10</span>(a)</span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<p>Using a function gives us the latest compute with the latest input value. However, it doesn’t save computation. The function will perform the computation even if the input value remains unchanged. That’s just how functions work.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="reactivity.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">add10</span>(<span class="at">num=</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<p>When working with trivial examples or data sets, computation isn’t an issue. But with increasing complexity, computation can be really expensive. We can save re-computation and get the latest computation with the magic of Reactive programming. Now, let’s take a look at some reactive expressions.</p>
<p>The input of a reactive expression is called a reactive input. When we change the reactive input value <code>input$a</code>, the expression itself changes and re-executes itself, only if necessary.</p>
<p>Example of a reactive expression</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="reactivity.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb10-2"><a href="reactivity.html#cb10-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">reactive</span>(input<span class="sc">$</span>a <span class="sc">+</span> <span class="dv">1</span>)</span></code></pre></div>
<p>You can write the same expression in different ways:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="reactivity.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb11-2"><a href="reactivity.html#cb11-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb11-3"><a href="reactivity.html#cb11-3" aria-hidden="true" tabindex="-1"></a>    input<span class="sc">$</span>a <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb11-4"><a href="reactivity.html#cb11-4" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb11-5"><a href="reactivity.html#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="reactivity.html#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb11-7"><a href="reactivity.html#cb11-7" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb11-8"><a href="reactivity.html#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(input<span class="sc">$</span>a <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb11-9"><a href="reactivity.html#cb11-9" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<div id="advanced-workings-of-reactive-expressions" class="section level3 unnumbered advanced hasAnchor">
<h3>Advanced: Workings of reactive expressions<a href="reactivity.html#advanced-workings-of-reactive-expressions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is an optional section that explains the workings of reactive expressions in a little more detail.</p>
<p>In the following example, we have a reactive input <code>input$a</code>, where <code>a =1</code>. We create a reactive expression, <code>expr1</code> which is just a function.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="reactivity.html#cb12-1" aria-hidden="true" tabindex="-1"></a>input <span class="ot">&lt;-</span> <span class="fu">reactiveValues</span>(<span class="at">a=</span><span class="dv">1</span>)</span>
<span id="cb12-2"><a href="reactivity.html#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="reactivity.html#cb12-3" aria-hidden="true" tabindex="-1"></a>expr1 <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb12-4"><a href="reactivity.html#cb12-4" aria-hidden="true" tabindex="-1"></a>    (input<span class="sc">$</span>a <span class="sc">+</span> <span class="dv">3</span>)<span class="sc">*</span><span class="dv">4</span>})</span></code></pre></div>
<p><code>isolate()</code> helps us view the values of the reactive expression in the R console.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="reactivity.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">isolate</span>(<span class="fu">expr1</span>())</span></code></pre></div>
<p>Now, we change the value of our reactive input and update the expression. Remember, we’re not computing anything, we’re just updating an expression.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="reactivity.html#cb14-1" aria-hidden="true" tabindex="-1"></a>input <span class="ot">&lt;-</span> <span class="fu">reactiveValues</span>(<span class="at">a=</span><span class="dv">5</span>)</span>
<span id="cb14-2"><a href="reactivity.html#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="reactivity.html#cb14-3" aria-hidden="true" tabindex="-1"></a>expr1 <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb14-4"><a href="reactivity.html#cb14-4" aria-hidden="true" tabindex="-1"></a>    (input<span class="sc">$</span>a <span class="sc">+</span> <span class="dv">3</span>)<span class="sc">*</span><span class="dv">4</span>})</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="reactivity.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">isolate</span>(<span class="fu">expr1</span>())</span></code></pre></div>
</div>
</div>
<div id="accessing-reactivity" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Accessing Reactivity<a href="reactivity.html#accessing-reactivity" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are two types of functions that we can use to access reactivity. We can use <code>render</code> functions or the <code>reactive</code> function. In most simple examples of Shiny applications, we are able to directly connect/link an input widget and an output object with a <code>renderX</code> function (e.g <code>renderTable</code>, <code>renderText</code>, <code>renderPlot</code>). These <code>renderX</code> functions are activated/re-calculated whenever the value of <code>input$someInputId</code> provided to that <code>renderX</code> function is updated/changed.</p>
<p>In such situations, the result is directed to an output on the UI. But what if you wanted to use the calculated result for multiple outputs? Since the <code>render</code> function directs its result into an output, this means that this value is not freely available to be used by other <code>render</code> functions. One solution could be to run the calculation multiple times with each <code>render</code> function. This isn’t a very efficient solution but it might be one that would do the job. However consider if the calculation was a very large one, rerunning this calculation multiple times might slow the app down a lot to the point of it becoming inoperable.</p>
<p>This is a situation where a <code>reactive</code> function would be useful. The output of a reactive function can be assigned to a variable name and this variable can be called within different <code>render</code> functions. Like a <code>render</code> function, the <code>reactive</code> function is recalculated any time the value of <code>input$anInputId</code> inside the reactive function is updated or changed.</p>
<p>Therefore for a more efficient solution, the calculation could performed in the reactive function once and then in multiple <code>render</code> functions, the value of the <code>reactive</code> function could be called.</p>
<p>Here is an example without a <code>reactive</code> function, somewhat contrived:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="reactivity.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb16-2"><a href="reactivity.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;airquality&quot;</span>)</span>
<span id="cb16-3"><a href="reactivity.html#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="reactivity.html#cb16-4" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb16-5"><a href="reactivity.html#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;tempModifier&quot;</span>, <span class="at">label =</span> <span class="st">&quot;this slider will multiply the temperature column of the `airquality` dataset by the selected value&quot;</span>, <span class="at">min =</span> <span class="dv">0</span>, </span>
<span id="cb16-6"><a href="reactivity.html#cb16-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">max =</span> <span class="dv">100</span>, <span class="at">value =</span> <span class="dv">50</span>),</span>
<span id="cb16-7"><a href="reactivity.html#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">textOutput</span>(<span class="at">outputId =</span> <span class="st">&quot;airResult&quot;</span>),</span>
<span id="cb16-8"><a href="reactivity.html#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plotOutput</span>(<span class="at">outputId =</span> <span class="st">&quot;plotResult&quot;</span>)</span>
<span id="cb16-9"><a href="reactivity.html#cb16-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-10"><a href="reactivity.html#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="reactivity.html#cb16-11" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb16-12"><a href="reactivity.html#cb16-12" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>airResult <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb16-13"><a href="reactivity.html#cb16-13" aria-hidden="true" tabindex="-1"></a>    new_temp <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Temp <span class="sc">*</span> input<span class="sc">$</span>tempModifier </span>
<span id="cb16-14"><a href="reactivity.html#cb16-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="st">&quot;the average of the modified temperature is:&quot;</span>, <span class="fu">mean</span>(new_temp))</span>
<span id="cb16-15"><a href="reactivity.html#cb16-15" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb16-16"><a href="reactivity.html#cb16-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-17"><a href="reactivity.html#cb16-17" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>plotResult <span class="ot">&lt;-</span>  <span class="fu">renderPlot</span>({</span>
<span id="cb16-18"><a href="reactivity.html#cb16-18" aria-hidden="true" tabindex="-1"></a>    new_temp <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Temp <span class="sc">*</span> input<span class="sc">$</span>tempModifier <span class="co"># we are performing the same calculation twice</span></span>
<span id="cb16-19"><a href="reactivity.html#cb16-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>(<span class="at">x=</span>airquality<span class="sc">$</span>Temp, <span class="at">y =</span> new_temp, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">8000</span>))</span>
<span id="cb16-20"><a href="reactivity.html#cb16-20" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb16-21"><a href="reactivity.html#cb16-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-22"><a href="reactivity.html#cb16-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-23"><a href="reactivity.html#cb16-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-24"><a href="reactivity.html#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
<p>Here an example with a <code>reactive</code> function:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="reactivity.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb17-2"><a href="reactivity.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;airquality&quot;</span>)</span>
<span id="cb17-3"><a href="reactivity.html#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="reactivity.html#cb17-4" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb17-5"><a href="reactivity.html#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;tempModifier&quot;</span>, <span class="at">label =</span> <span class="st">&quot;this slider will multiply the temperature column of the `airquality` dataset by the selected value&quot;</span>, <span class="at">min =</span> <span class="dv">0</span>, </span>
<span id="cb17-6"><a href="reactivity.html#cb17-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">max =</span> <span class="dv">100</span>, <span class="at">value =</span> <span class="dv">50</span>),</span>
<span id="cb17-7"><a href="reactivity.html#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">textOutput</span>(<span class="at">outputId =</span> <span class="st">&quot;airResult&quot;</span>),</span>
<span id="cb17-8"><a href="reactivity.html#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plotOutput</span>(<span class="at">outputId =</span> <span class="st">&quot;plotResult&quot;</span>)</span>
<span id="cb17-9"><a href="reactivity.html#cb17-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-10"><a href="reactivity.html#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="reactivity.html#cb17-11" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb17-12"><a href="reactivity.html#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># we&#39;ve used a reactive function to create a reactive variable which can be used by both render functions </span></span>
<span id="cb17-13"><a href="reactivity.html#cb17-13" aria-hidden="true" tabindex="-1"></a>  new_temp <span class="ot">&lt;-</span>  <span class="fu">reactive</span>({</span>
<span id="cb17-14"><a href="reactivity.html#cb17-14" aria-hidden="true" tabindex="-1"></a>    airquality<span class="sc">$</span>Temp <span class="sc">*</span> input<span class="sc">$</span>tempModifier</span>
<span id="cb17-15"><a href="reactivity.html#cb17-15" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb17-16"><a href="reactivity.html#cb17-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-17"><a href="reactivity.html#cb17-17" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>airResult <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb17-18"><a href="reactivity.html#cb17-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="st">&quot;the average of the modified temperature is:&quot;</span>, <span class="fu">mean</span>(<span class="fu">new_temp</span>()))</span>
<span id="cb17-19"><a href="reactivity.html#cb17-19" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb17-20"><a href="reactivity.html#cb17-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-21"><a href="reactivity.html#cb17-21" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>plotResult <span class="ot">&lt;-</span>  <span class="fu">renderPlot</span>({</span>
<span id="cb17-22"><a href="reactivity.html#cb17-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>(<span class="at">x=</span>airquality<span class="sc">$</span>Temp, <span class="at">y =</span> <span class="fu">new_temp</span>(), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">8000</span>))</span>
<span id="cb17-23"><a href="reactivity.html#cb17-23" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb17-24"><a href="reactivity.html#cb17-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-25"><a href="reactivity.html#cb17-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-26"><a href="reactivity.html#cb17-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-27"><a href="reactivity.html#cb17-27" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
<div id="challenge-5-create-a-function-that-uses-pythagoras-theorm-to-calculate-hypotenuse-if-height-and-base-variables-are-given-breakout." class="section level3 unnumbered challenge hasAnchor">
<h3>Challenge 5: Create a function that uses pythagoras theorm to calculate hypotenuse, if height and base variables are given (breakout).<a href="reactivity.html#challenge-5-create-a-function-that-uses-pythagoras-theorm-to-calculate-hypotenuse-if-height-and-base-variables-are-given-breakout." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this challenge, you have 2 input sliders for <code>a</code> and <code>b</code> in the UI. Create a server function to compute Pythagoras theorm and calculate hypotenuse.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="reactivity.html#cb18-1" aria-hidden="true" tabindex="-1"></a>ui_pythagoras <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb18-2"><a href="reactivity.html#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">&quot;Hypotenuse app&quot;</span>),</span>
<span id="cb18-3"><a href="reactivity.html#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sliderInput</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;Length a&quot;</span>, <span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">5</span>),</span>
<span id="cb18-4"><a href="reactivity.html#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sliderInput</span>(<span class="st">&quot;b&quot;</span>, <span class="st">&quot;Length b&quot;</span>, <span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">5</span>)</span>
<span id="cb18-5"><a href="reactivity.html#cb18-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="structure.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tutorial.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/nkandhari/R-ShinyIntro-MBP/edit/master/04-reactivity.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/nkandhari/R-ShinyIntro-MBP/blob/master/04-reactivity.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
